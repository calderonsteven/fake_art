<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Split Random Colors</title>

    <script src="http://code.jquery.com/jquery-1.6.min.js" type="text/javascript"></script>

    <script>
        $(document).ready(horizontalSplit);

        function getRandomColor() {
            var r = Math.floor(Math.random() * 255);
            var g = Math.floor(Math.random() * 255);
            var b = Math.floor(Math.random() * 255);

            return "rgb(" + r + ", " + g + ", " + b + ")";
        }

        function verticalSplit() {
            $("#container").css({ "background-color": getRandomColor() });
            $("#one, #two").css({ "width": "100%", "height": "50%" });
            $("#one, #two").css({ "background-color": $("#one").css("background-color") });
            $("#one").css("top", "0");
            $("#two").css("bottom", "0");

            var vertical_animation = 0;
            $("#one, #two").animate(
                { height: 0 },
                "slow",
                function() { (++vertical_animation); if (vertical_animation == 2) { horizontalSplit(); } }
            );
        }

        function horizontalSplit() {
            $("#one, #two").css({ "width": "50%", "height": "100%", "background-color": getRandomColor() });
            $("#one").css("left", "0");
            $("#two").css("right", "0");

            var horizontal_animation = 0;
            $("#one, #two").animate(
                { width: 0 },
                "slow",
                function() { (++horizontal_animation); if (horizontal_animation == 2) { verticalSplit(); } }
            );
        }
    </script>

    <style type="text/css">
        #container
        {
            position: relative;
            width: 400px;
            height: 200px;
        }
        #container div
        {
            background-color: Yellow;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="one">
        </div>
        <div id="two">
        </div>
    </div>
</body>
</html>
